var Yike=angular.module("Yike",["ngRoute","Ctrls","Directives"]);Yike.config(["$routeProvider",function(t){t.when("/today",{templateUrl:"./views/today.html",controller:"TodayCtrl"}).when("/older",{templateUrl:"./views/older.html",controller:"OlderCtrl"}).when("/author",{templateUrl:"./views/author.html",controller:"AuthorCtrl"}).when("/content",{templateUrl:"./views/content.html",controller:"contentCtrl"}).when("/authorcon",{templateUrl:"./views/authorcon.html",controller:"authorconCtrl"}).otherwise({redirectTo:"/today"})}]),Yike.run(["$rootScope",function(t){t.callapsed=!1,t.loaded=!1,t.toggle=function(){t.collapsed=!t.collapsed;var o=document.querySelectorAll(".navs dd");if(t.collapsed)for(var e=o.length-1;e>=0;e--)o[e].style.transform="translate(0)",o[e].style.transitionDuration=.2*(e+1)+"s",o[e].style.transitionDelay="0.3s";else for(var e=0;e<o.length;e++)o[e].style.transform="translate(-100%)",o[e].style.transitionDuration=.2*(o.length-e)+"s",o[e].style.transitionDelay=""},t.con=function(){t.id=this.post.id,location.href="#!/content"},t.aucon=function(){t.id=parseInt(this.author.id),location.href="#!/authorcon"}}]),angular.module("Ctrls",[]).controller("NavsCtrl",["$scope",function(t){t.navs=[{text:"今日一刻",icon:"icon-home",link:"#!/today"},{text:"昨天内容",icon:"icon-file-empty",link:"#!/older"},{text:"热门作者",icon:"icon-pencil",link:"#!/author"},{text:"返回首页",icon:"icon-home",link:"#!/today"}]}]).controller("TodayCtrl",["$scope","$http","$rootScope","$filter",function(t,o,e,a){e.loaded=!1,e.title="今日一刻",e.key=0,o({url:"./api/today.php",params:{today:a("date")(new Date,"yyyy-MM-dd")}}).then(function(o){t.posts=o.data.posts,t.date=o.data.date,e.loaded=!0})}]).controller("OlderCtrl",["$scope","$http","$rootScope",function(t,o,e){e.loaded=!1,e.title="昨天内容",e.key=1;o({url:"./api/older.php",params:{day:-1}}).then(function(o){t.posts=o.data.posts,t.date=o.data.date,e.loaded=!0})}]).controller("contentCtrl",["$scope","$http","$rootScope",function(t,o,e){e.loaded=!1,e.title="一刻内容",e.key=0,o({url:"./api/content.php",params:{id:e.id}}).then(function(o){t.content=o.data.share_pic_url,t.date=o.data.author.name,e.loaded=!0})}]).controller("AuthorCtrl",["$scope","$http","$rootScope",function(t,o,e){e.title="热门作者",e.loaded=!1,e.key=2,o({url:"./api/author.php"}).then(function(o){t.rec=o.data.rec.authors,t.all=o.data.all.authors,e.loaded=!0})}]).controller("authorconCtrl",["$scope","$http","$rootScope",function(t,o,e){e.loaded=!1,e.title="查看作者",e.key=2,o({url:"./api/authorcon.php",params:{id:e.id}}).then(function(o){t.posts=o.data.posts,t.date=o.data.date,e.loaded=!0})}]),angular.module("Directives",[]).directive("yikeLoading",function(){return{restrict:"A",template:'<img ng-hide="loaded" class="loading" src="./public/images/loading.gif" alt="" />'}});